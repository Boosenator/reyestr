from pathlib import Path

# Корінь проєкту
PROJECT_ROOT = Path(__file__).resolve().parent

# Шлях до файлу БД
DB_PATH = PROJECT_ROOT / "config" / "db.sqlite"

# Папка з документами
DOCUMENTS_DIR = PROJECT_ROOT / "ВСІ документи"

# 1. Типи зв’язків відповідно до Наказу №40
LINK_TYPES = {
    "01": "універсальний",
    "02": "попередник",
    "03": "наступник",
    "04": "копія",
    "05": "додаток",
    "06": "довідка",
    "07": "відповідь",
    "08": "відсилання",
    "09": "архів",
    "10": "зміна",
    "11": "скасування",
    "12": "контрольний",
    "13": "доручення",
    "14": "заява/рапорт",
    "15": "протокол/акт"
}

# 2. Відповідні реверсні типи
REVERSE_LINKS = {
    "попередник": "наступник",
    "наступник": "попередник",
    "копія": "копія",
    "додаток": "основний документ",
    "основний документ": "додаток",
    "довідка": "довідка",
    "відповідь": "запит",
    "запит": "відповідь",
    "відсилання": "відсилання",
    "архів": "актуальний",
    "актуальний": "архів",
    "зміна": "змінений",
    "змінений": "зміна",
    "скасування": "скасовано",
    "скасовано": "скасування",
    "контрольний": "контрольний",
    "доручення": "доручення",
    "заява/рапорт": "заява/рапорт",
    "протокол/акт": "протокол/акт"
}

# 3. Початкові типи документів та їх категорії
INITIAL_DOCUMENT_TYPES = [
    ("наказ",                         "Розпорядчі документи"),
    ("розпорядження",                "Розпорядчі документи"),
    ("директива",                    "Розпорядчі документи"),
    ("вказівка",                     "Розпорядчі документи"),
    ("доповідна записка",            "Інформаційно-довідкові документи"),
    ("рапорт",                       "Інформаційно-довідкові документи"),
    ("службова записка",             "Інформаційно-довідкові документи"),
    ("інформаційна довідка",         "Інформаційно-довідкові документи"),
    ("зведення",                     "Інформаційно-довідкові документи"),
    ("бойове донесення",             "Інформаційно-довідкові документи"),
    ("характеристика",               "Інформаційно-довідкові документи"),
    ("подання",                      "Кадрові документи"),
    ("подання на заохочення",         "Кадрові документи"),
    ("подання на звільнення",        "Кадрові документи"),
    ("рішення атестаційної комісії", "Кадрові документи"),
    ("положення",                    "Організаційно-розпорядчі документи"),
    ("інструкція",                   "Організаційно-розпорядчі документи"),
    ("план",                         "Організаційно-розпорядчі документи"),
    ("таблиця",                      "Організаційно-розпорядчі документи"),
    ("графік",                       "Організаційно-розпорядчі документи"),
    ("облікові картки",              "Обліково-статистичні документи"),
    ("іменні списки",                "Обліково-статистичні документи"),
    ("звіти",                        "Обліково-статистичні документи"),
    ("відомості",                    "Обліково-статистичні документи"),
    ("книги обліку",                 "Обліково-статистичні документи"),
    ("бойове розпорядження",         "Документи спец. призначення"),
    ("бойовий наказ",                "Документи спец. призначення"),
    ("план бойового застосування",   "Документи спец. призначення"),
    ("таблиця бойового управління",  "Документи спец. призначення"),
    ("СОП",                          "Документи спец. призначення"),
    ("маршрутна карта",              "Документи спец. призначення"),
    ("клопотання",                   "Взаємодія з іншими структурами"),
    ("звернення",                    "Взаємодія з іншими структурами"),
    ("пояснювальні записки",         "Взаємодія з іншими структурами"),
    ("запити",                       "Взаємодія з іншими структурами"),
    ("інші",                         "Інше"),
]

# 4. Опис структури БД для ініціалізації
TABLES = {
    "documents": {
        "columns": (
            "id INTEGER PRIMARY KEY AUTOINCREMENT,"  
            "filename TEXT, filepath TEXT, doc_type TEXT, doc_number TEXT,"
            "doc_date TEXT, sender TEXT, status TEXT, tags TEXT,"
            "description TEXT, is_controlled INTEGER DEFAULT 0, deadline TEXT,"
            "folder TEXT, last_modified REAL, file_hash TEXT, is_new INTEGER DEFAULT 0"
        ),
        "indices": [
            ("idx_documents_hash", "file_hash"),
            ("idx_documents_is_new", "is_new"),
        ],
    },
    "document_types": {
        "columns": (
            "id INTEGER PRIMARY KEY AUTOINCREMENT,"  
            "type_name TEXT UNIQUE, category TEXT"
        ),
        "indices": [],
    },
    "document_links": {
        "columns": (
            "id INTEGER PRIMARY KEY AUTOINCREMENT,"  
            "from_doc_id INTEGER, to_doc_id INTEGER, link_type TEXT,"
            "FOREIGN KEY(from_doc_id) REFERENCES documents(id),"
            "FOREIGN KEY(to_doc_id) REFERENCES documents(id)"
        ),
        "indices": [],
    },
    "document_numbers": {
        "columns": (
            "id INTEGER PRIMARY KEY AUTOINCREMENT,"  
            "document_id INTEGER, number_type TEXT, number_value TEXT,"
            "FOREIGN KEY(document_id) REFERENCES documents(id)"
        ),
        "indices": [
            ("idx_numbers_doc", "document_id"),
        ],
    },
}